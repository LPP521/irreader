<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="user-scalable=no, width=500">
    <title>irreader lab</title>
    <meta name="description" content="it should be fun">
    <link rel="icon" href="libs/favicon.png" type="image/png" />
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.js"></script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111452095-9"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'UA-111452095-9');
    </script>
</head>

<body>

    <style>
        body {
            background: rgb(255, 245, 252);
            margin: 0px;
            padding: 0px;
            font-family: "Arial","Microsoft YaHei","黑体","宋体",sans-serif;
        }

        .total {
            padding: 10px;
        }

        h1 {
            font-size: 18px;
            color: palevioletred;
        }

        pre {
            font-size: 12px;
        }

        #main_area{
            display: grid;
            grid-template-columns: 1fr 1fr;
        }

        h2 {
            font-size: 15px;
        }

        .themes {
            display: grid;
            grid-template-columns: 1fr;
        }

        .theme {
            width: 300px;
            margin: 10px;
        }

        .theme img {
            width: 300px;
        }

        #templates {
            display: none;
        }
    </style>

    <script>

        function add_t(url){
            return url+'?_t='+Date.now()
        }
        $(document).ready(() => {
            let web_themes = [

                {
                    name: '原生',
                    preview: 'http://irreader.fatecore.com/web-themes/light.png',
                    reset: true
                },
                {
                    name: '暗黑 v3',
                    preview: 'http://irreader.fatecore.com/web-themes/dark.png',
                    cssfile: 'http://irreader.fatecore.com/web-themes/dark.css'
                },
                {
                    name: '暗黑++ v2',
                    preview: 'http://irreader.fatecore.com/web-themes/darker.png',
                    cssfile: 'http://irreader.fatecore.com/web-themes/darker.css'
                },
                {
                    name: 'Window下临时字体修复-雅黑',
                    preview: 'https://fate2.oss-cn-shanghai.aliyuncs.com/pool/20180829170745.png',
                    cssfile: 'http://irreader.fatecore.com/web-themes/font-fix.css'
                }
            ]
            web_themes.forEach((theme) => {
                let new_element = $('#web_theme_template').clone()
                new_element.find('img').attr('src', add_t(theme.preview))
                new_element.find('.name').text(theme.name)
                let theme_link = 'likefeed://reset-web-theme?t=t'
                if (!theme.reset) {
                    theme_link = `likefeed://set-web-theme?cssfile=${encodeURIComponent(add_t(theme.cssfile))}`
                }
                new_element.find('.btn-apply').attr('href', theme_link)
                new_element.removeAttr('id')
                new_element.appendTo('#web_themes')
            })

            let app_themes = [
                {
                    name: '原生',
                    preview: 'http://irreader.fatecore.com/app-themes/light.png',
                    reset: true
                },

                {
                    name: '暗黑(beta) v2',
                    preview: 'http://irreader.fatecore.com/app-themes/dark.png',
                    cssfile: 'http://irreader.fatecore.com/app-themes/dark.css',
                    background: '#333'
                },
                {
                    name: 'PINKMAN',
                    preview: 'http://irreader.fatecore.com/app-themes/pink.png',
                    cssfile: 'http://irreader.fatecore.com/app-themes/pink.css',
                    background: '#ffeffe'
                },
                {
                    name: 'Windows下临时字体修复-雅黑',
                    preview: 'http://irreader.fatecore.com/app-themes/font-fix.png',
                    cssfile: 'http://irreader.fatecore.com/app-themes/font-fix.css',
                    background: '#FFF'
                }
            ]

            app_themes.forEach((theme) => {
                let new_element = $('#app_theme_template').clone()
                new_element.find('img').attr('src', add_t(theme.preview))
                new_element.find('.name').text(theme.name)
                theme_link = 'likefeed://reset-app-theme?t=t'
                if (!theme.reset) {
                    theme_link = `likefeed://set-app-theme?cssfile=${encodeURIComponent(add_t(theme.cssfile))}&background=${encodeURIComponent(theme.background)}`
                }
                new_element.find('.btn-apply').attr('href', theme_link)
                new_element.removeAttr('id')
                new_element.appendTo('#app_themes')
            })
        })


    </script>

    <div class="total">
        <h1>irreader 主题房</h1>
        <p>
            阅读主题应用于阅读窗口，软件主题应用于界面的其他部分。
        </p>

        <div id="main_area">

                <div class="colm">
                        <h2>软件主题</h2>
                        <div class="themes" id="app_themes">
        
                        </div>
                    </div>
        
            <div class="colm">
                <h2>阅读主题</h2>
                <div id="web_themes" class="themes">

                </div>
            </div>

        </div>


        <div id="templates">
            <div class="theme web-theme" id="web_theme_template">
                <img src="web-themes/light.jpg" />
                <div style="text-align: center;">
                    <span class="name">light</span>
                    <a href="#" class="btn-apply" target="_blank">获取</a>
                </div>
            </div>


            <div class="theme app-theme" id="app_theme_template">
                <img src="app-themes/light.jpg" />
                <div style="text-align: center;">
                    <span class="name">light</span>
                    <a href="#" class="btn-apply" target="_blank">获取</a>
                </div>
            </div>
        </div>

    </div>
</body>

</html>